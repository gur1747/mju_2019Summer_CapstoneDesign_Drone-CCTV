#include <SoftwareSerial.h>     //bluetooth communication library
#include <Wire.h>               //object sensing library
#include <Adafruit_MLX90614.h>  //object sensing library

Adafruit_MLX90614 mlx = Adafruit_MLX90614();
SoftwareSerial mySerial(2, 3);  // RX, TX
const int GasPin = A0;          // Analog pin for gas sensor input

void setup() {
  // Open serial communications and wait for port to open:
  Serial.begin(9600);

  Serial.println("Goodnight moon!");
  // set the data rate for the SoftwareSerial port
  mySerial.begin(9600);
  mySerial.println("Hello, world?");

  //Serial.println("Adafruit MLX90614 test");  
  mlx.begin(); 

  // Set analog pin A0 to input mode
  pinMode(GasPin, INPUT);
}

void loop() {
  
  // Receive analog data from gas sensor and output to serial monitor
  analogRead(GasPin);
  if(analogRead(GasPin) > 500){
    //Serial.print(analogRead(GasPin));
    Serial.println("*********Dangerous gas detected.*********");
    Serial.println();
  }

  // Set the sensing temperature to 28 degrees.
  if(mlx.readObjectTempC() >= 28){
    float tempC = mlx.readObjectTempC();
    //Serial.println("*****************Danger*****************");
    //Serial.print("Ambient = "); Serial.print(mlx.readAmbientTempC());
    //Serial.print("*C\tObject = "); 
    Serial.println(tempC); 
    //Serial.println("*C");
    //Serial.print("Ambient = "); Serial.print(mlx.readAmbientTempF());
    //Serial.print("*F\tObject = "); Serial.print(mlx.readObjectTempF()); Serial.println("*F");
    //Serial.println();
  }
   
  if (mySerial.available()) {
    Serial.write(mySerial.read());
    float toSend = (float)mySerial.read();
    Serial.print(toSend);
  }
  if (Serial.available()) {
    mySerial.write(Serial.read());
    float toSend = (float)Serial.read();
    mySerial.print(toSend);
  }
  
  delay(200);

}